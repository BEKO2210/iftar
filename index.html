<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1">
    <meta name="theme-color" content="#070b14">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Iftar Kompass ‚Äì Gebetszeiten & Iftar-Countdown f√ºr Ramadan 2026. Offizielle Diyanet-Zeiten f√ºr die Region Stuttgart.">
    <title>Iftar Kompass üåô</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --gold: #d4a853;
            --gold-light: #f0d68a;
            --gold-dark: #b8860b;
            --gold-glow: rgba(212, 168, 83, 0.15);
            --bg: #070b14;
            --bg-card: rgba(15, 20, 35, 0.8);
            --bg-input: rgba(10, 15, 28, 0.95);
            --border: rgba(212, 168, 83, 0.1);
            --border-subtle: rgba(100, 116, 139, 0.15);
            --text: #edf2f7;
            --text-sec: #8896a8;
            --text-dim: #4a5568;
            --green: #34d399;
            --r: 14px;
            --safe-b: env(safe-area-inset-bottom, 0px);
        }

        html { background: var(--bg); -webkit-text-size-adjust: 100%; }

        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg); color: var(--text);
            min-height: 100dvh; overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-tap-highlight-color: transparent;
        }

        button, select, a { touch-action: manipulation; }

        select:-webkit-autofill,
        select:-webkit-autofill:hover,
        select:-webkit-autofill:focus {
            -webkit-text-fill-color: var(--text) !important;
            -webkit-box-shadow: 0 0 0 40px var(--bg-input) inset !important;
        }

        ::selection { background: rgba(212,168,83,0.25); color: var(--text); }

        /* ‚îÄ‚îÄ Starfield ‚îÄ‚îÄ */
        .sky { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
        .sky::after {
            content: ''; position: absolute; inset: 0;
            background:
                radial-gradient(ellipse 45% 35% at 12% 6%, rgba(212,168,83,0.04), transparent),
                radial-gradient(ellipse 35% 45% at 88% 88%, rgba(59,130,246,0.025), transparent);
        }
        .star {
            position: absolute; border-radius: 50%; background: #fff;
            animation: twinkle var(--d) ease-in-out infinite alternate; opacity: 0;
        }
        @keyframes twinkle {
            from { opacity: 0.06; transform: scale(0.6); }
            to { opacity: var(--o, 0.55); transform: scale(1.2); }
        }

        /* ‚îÄ‚îÄ App shell ‚îÄ‚îÄ */
        .app {
            position: relative; z-index: 1;
            max-width: 400px; margin: 0 auto;
            padding: 12px 16px calc(12px + var(--safe-b));
            min-height: 100dvh;
            display: flex; flex-direction: column;
        }

        /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
        .hdr { text-align: center; padding: 16px 0 12px; animation: up .6s .1s both; }
        @keyframes up {
            from { opacity: 0; transform: translateY(14px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .bsm {
            font-family: 'Amiri', serif; color: var(--gold);
            opacity: 0.3; font-size: 0.82rem; letter-spacing: 4px;
        }
        .hdr h1 {
            font-family: 'Amiri', serif; font-size: 1.9rem; font-weight: 700;
            background: linear-gradient(135deg, var(--gold-light), var(--gold), var(--gold-dark));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; line-height: 1.2;
        }
        .hdr-date {
            font-size: 0.67rem; color: var(--text-dim);
            margin-top: 2px; font-weight: 300;
        }

        /* ‚îÄ‚îÄ Dropdown ‚îÄ‚îÄ */
        .search { animation: up .6s .18s both; margin-bottom: 16px; }

        .inp {
            height: 46px; width: 100%;
            background: var(--bg-input);
            border: 1.5px solid var(--border-subtle);
            color: var(--text); padding: 0 36px 0 14px;
            border-radius: var(--r);
            font-family: 'Outfit', sans-serif;
            font-size: 16px;
            transition: border-color .25s, box-shadow .25s;
            -webkit-appearance: none; appearance: none;
            cursor: pointer;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23d4a853' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 14px;
        }
        .inp option { background: #0f1423; color: var(--text); }
        .inp:focus {
            outline: none; border-color: var(--gold);
            box-shadow: 0 0 0 3px var(--gold-glow);
        }
        .inp:focus-visible {
            outline: 2px solid var(--gold-light);
            outline-offset: 1px;
        }

        /* Location meta */
        .s-meta {
            margin-top: 7px; text-align: center;
            font-size: 0.66rem; min-height: 17px;
            color: var(--gold); font-weight: 500; opacity: 0.85;
        }
        .badge {
            display: inline-flex; align-items: center;
            font-size: 0.56rem; font-weight: 700;
            padding: 2px 7px; border-radius: 4px; margin-left: 5px;
            letter-spacing: 0.4px; text-transform: uppercase;
            vertical-align: middle; line-height: 1;
        }
        .badge-ok { background: rgba(52,211,153,0.12); color: var(--green); border: 1px solid rgba(52,211,153,0.22); }

        /* ‚îÄ‚îÄ Countdown ‚îÄ‚îÄ */
        .cd { text-align: center; padding: 6px 0 16px; animation: up .6s .3s both; }
        .cd-orb {
            position: relative; display: inline-flex;
            align-items: center; justify-content: center;
            width: 76px; height: 76px; margin-bottom: 10px;
        }
        .cd-orb::before {
            content: ''; position: absolute; inset: -3px; border-radius: 50%;
            background: conic-gradient(from 0deg, var(--gold), transparent 16%, transparent 42%, var(--gold) 50%, transparent 66%, transparent 92%, var(--gold));
            animation: spin 8s linear infinite; opacity: 0.22;
        }
        .cd-orb::after {
            content: ''; position: absolute; inset: 2px;
            border-radius: 50%; background: var(--bg);
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .cd-moon {
            position: relative; z-index: 1;
            width: 60px; height: 60px; border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, #161d2c, #0a1020);
            display: flex; align-items: center; justify-content: center;
            box-shadow: inset 0 0 16px rgba(212,168,83,0.06);
        }
        .cd-moon svg {
            width: 26px; height: 26px; color: var(--gold);
            filter: drop-shadow(0 0 5px rgba(212,168,83,0.3));
        }
        .cd-lbl {
            font-size: 0.58rem; text-transform: uppercase;
            letter-spacing: 2.5px; color: var(--text-sec); margin-bottom: 5px;
        }
        .cd-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2.6rem; font-weight: 700;
            letter-spacing: 1.5px; line-height: 1; color: var(--text);
            transition: color .4s;
        }
        .cd-time.on { text-shadow: 0 0 32px rgba(212,168,83,0.12); }
        .cd-time.end {
            color: var(--green); font-size: 1.2rem;
            font-family: 'Outfit', sans-serif; font-weight: 600;
            letter-spacing: 0; line-height: 1.4;
        }
        .cd-tgt { margin-top: 5px; color: var(--gold); font-size: 0.76rem; font-weight: 500; }
        .dot {
            display: inline-block; width: 5px; height: 5px;
            background: var(--gold); border-radius: 50%;
            margin-left: 5px; vertical-align: 2px;
            animation: blink 2s ease-in-out infinite;
        }
        .dot.off { display: none; }
        @keyframes blink {
            0%,100% { opacity: 1; } 50% { opacity: 0.3; }
        }

        /* ‚îÄ‚îÄ Progress ‚îÄ‚îÄ */
        .prog { margin-bottom: 14px; display: none; animation: up .4s both; padding: 0 2px; }
        .prog-h {
            display: flex; justify-content: space-between;
            font-size: 0.58rem; color: var(--text-dim); margin-bottom: 5px;
        }
        .prog-bar {
            height: 3px; background: rgba(100,116,139,0.08);
            border-radius: 3px; overflow: visible;
            position: relative;
        }
        .prog-fill {
            height: 100%; border-radius: 3px; width: 0%;
            background: linear-gradient(90deg, var(--gold-dark), var(--gold), var(--gold-light));
            transition: width .8s ease; position: relative;
        }
        .prog-dot {
            position: absolute; right: -3px; top: -3px;
            width: 7px; height: 7px;
            background: var(--gold-light); border-radius: 50%;
            box-shadow: 0 0 6px rgba(212,168,83,0.5);
            pointer-events: none;
        }

        /* ‚îÄ‚îÄ Cards ‚îÄ‚îÄ */
        .cards {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 8px; animation: up .6s .45s both;
        }
        .p {
            background: var(--bg-card);
            backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            border: 1px solid var(--border-subtle);
            border-radius: var(--r);
            padding: 13px 12px 12px;
            position: relative; overflow: hidden;
            transition: border-color .3s, background .3s, box-shadow .3s;
        }
        .p::after {
            content: ''; position: absolute; top: 0; left: 0;
            width: 2.5px; height: 100%; border-radius: 0 2px 2px 0;
            background: transparent; transition: background .3s;
        }
        .p-n {
            font-size: 0.65rem; color: var(--text-sec);
            font-weight: 400; letter-spacing: 0.2px; margin-bottom: 2px;
        }
        .p-t {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.05rem; font-weight: 700;
            letter-spacing: 0.3px; color: var(--text);
        }

        /* ƒ∞ftar card */
        .p.iftar {
            background: rgba(212,168,83,0.04);
            border-color: rgba(212,168,83,0.15);
            box-shadow: 0 0 16px rgba(212,168,83,0.04);
        }
        .p.iftar::after { background: linear-gradient(to bottom, var(--gold-light), var(--gold-dark)); }
        .p.iftar .p-n { color: var(--gold); font-weight: 500; }
        .p.iftar .p-t { color: var(--gold-light); }

        /* Day card */
        .p.day::after { background: var(--green); }
        .p.day .p-n { color: var(--green); font-weight: 500; }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        .ft {
            text-align: center; padding: 14px 8px 4px;
            font-size: 0.6rem; color: var(--text-dim);
            line-height: 1.55; animation: up .6s .55s both;
        }
        .ft b { color: var(--text-sec); font-weight: 500; }

        /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
        @media (max-width: 359px) {
            .hdr h1 { font-size: 1.6rem; }
            .cd-time { font-size: 2.1rem; }
            .p-t { font-size: 0.95rem; }
            .inp { height: 42px; }
        }
        @media (min-width: 360px) and (max-width: 389px) {
            .cd-time { font-size: 2.4rem; }
        }
        @media (min-width: 414px) {
            .app { padding: 20px 20px calc(16px + var(--safe-b)); }
        }
        @media (min-height: 780px) {
            .cd { padding: 10px 0 22px; }
            .cards { gap: 10px; }
        }
        @media (max-height: 500px) and (orientation: landscape) {
            .cd-orb { width: 50px; height: 50px; margin-bottom: 6px; }
            .cd-moon { width: 40px; height: 40px; }
            .cd-moon svg { width: 18px; height: 18px; }
            .cd-time { font-size: 2rem; }
            .cd { padding: 2px 0 8px; }
            .hdr { padding: 8px 0 6px; }
            .cards { gap: 6px; }
            .p { padding: 10px; }
        }
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            .star { display: none; }
        }
    </style>
</head>
<body>

<div class="sky" id="sky"></div>

<div class="app">
    <header class="hdr">
        <div class="bsm">‚òΩ ÿ®ÿ≥ŸÖ ÿßŸÑŸÑŸá ‚òΩ</div>
        <h1>Iftar Kompass</h1>
        <div class="hdr-date" id="dateStr"></div>
    </header>

    <div class="search">
        <select id="city" class="inp">
            <option value="">Stadt w√§hlen‚Ä¶</option>
        </select>
        <div class="s-meta" id="meta"></div>
    </div>

    <div class="cd">
        <div class="cd-orb"><div class="cd-moon"><svg viewBox="0 0 24 24" fill="rgba(212,168,83,0.08)" stroke="currentColor" stroke-width="1.5"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg></div></div>
        <div class="cd-lbl">Verbleibende Zeit bis ƒ∞ftar</div>
        <div class="cd-time" id="cdT">--:--:--</div>
        <div class="cd-tgt" id="cdTgt">Ak≈üam (ƒ∞ftar): --:--<span class="dot off" id="dot"></span></div>
    </div>

    <div class="prog" id="prog">
        <div class="prog-h"><span>ƒ∞msak</span><span id="pPct">0 %</span><span>Ak≈üam</span></div>
        <div class="prog-bar"><div class="prog-fill" id="pFill"><div class="prog-dot"></div></div></div>
    </div>

    <div class="cards">
        <div class="p iftar"><div class="p-n">Ak≈üam ¬∑ ƒ∞ftar ‚òΩ</div><div class="p-t" id="vM">--:--</div></div>
        <div class="p day"><div class="p-n">Ramadan 2026</div><div class="p-t" id="vDay">Tag --</div></div>
    </div>

    <div class="ft" id="ft">Ramadan Mubarak üåô</div>
</div>

<script>
/* Stars */
(()=>{const c=document.getElementById('sky');for(let i=0;i<40;i++){const s=document.createElement('div');s.className='star';s.style.cssText=`left:${Math.random()*100}%;top:${Math.random()*100}%;--d:${2.5+Math.random()*5}s;--o:${(.2+Math.random()*.4).toFixed(2)};animation-delay:${Math.random()*5}s;width:${.8+Math.random()*1.6}px;height:${.8+Math.random()*1.6}px`;c.appendChild(s)}})();

/* ‚ïê‚ïê‚ïê FESTE IFTAR-ZEITEN ¬∑ Ramadan 2026 (18. Feb ‚Äì 19. M√§rz) ‚ïê‚ïê‚ïê */
/* Quelle: Diyanet ƒ∞≈üleri Ba≈ükanlƒ±ƒüƒ± ‚Äì Maghrib/ƒ∞ftar pro Tag */
const D={
'Backnang':'17:50,17:52,17:53,17:55,17:56,17:58,18:00,18:01,18:03,18:04,18:06,18:08,18:09,18:11,18:12,18:14,18:16,18:17,18:19,18:20,18:22,18:24,18:25,18:27,18:29,18:30,18:32,18:33,18:35,18:37',
'Bietigheim-Bissingen':'17:48,17:50,17:51,17:53,17:55,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:28,18:29,18:31,18:32,18:34,18:36',
'B√∂blingen':'17:48,17:50,17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Denkendorf':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Ditzingen':'17:48,17:50,17:51,17:53,17:55,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Eislingen/Fils':'17:51,17:53,17:54,17:56,17:57,17:59,18:01,18:02,18:04,18:05,18:07,18:09,18:10,18:12,18:13,18:15,18:17,18:18,18:20,18:22,18:23,18:25,18:26,18:28,18:30,18:31,18:33,18:34,18:36,18:38',
'Esslingen am Neckar':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Fellbach':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Filderstadt':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:20,18:21,18:23,18:24,18:26,18:28,18:29,18:31,18:32,18:34,18:36',
'Freiberg am Neckar':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:20,18:21,18:23,18:24,18:26,18:28,18:29,18:31,18:32,18:34,18:36',
'G√§rtringen':'17:47,17:49,17:50,17:52,17:54,17:55,17:57,17:58,18:00,18:01,18:03,18:05,18:06,18:08,18:10,18:11,18:13,18:14,18:16,18:18,18:19,18:21,18:22,18:24,18:26,18:27,18:29,18:30,18:32,18:35',
'Geislingen an der Steige':'17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:08,18:09,18:11,18:12,18:14,18:16,18:17,18:19,18:20,18:22,18:24,18:26,18:27,18:29,18:30,18:32,18:34,18:35,18:37,18:38',
'Gerlingen':'17:48,17:50,17:51,17:53,17:55,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'G√∂ppingen':'17:50,17:52,17:53,17:55,17:57,17:58,18:00,18:01,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:19,18:21,18:23,18:25,18:26,18:28,18:29,18:31,18:33,18:34,18:36,18:38',
'Herrenberg':'17:47,17:49,17:50,17:52,17:54,17:55,17:57,17:58,18:00,18:01,18:03,18:05,18:06,18:08,18:10,18:11,18:13,18:14,18:16,18:18,18:19,18:21,18:22,18:24,18:26,18:27,18:29,18:30,18:32,18:34',
'Holzgerlingen':'17:48,17:50,17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Kirchheim unter Teck':'17:50,17:52,17:53,17:55,17:56,17:58,18:00,18:01,18:03,18:04,18:06,18:08,18:09,18:11,18:12,18:14,18:16,18:17,18:19,18:20,18:22,18:24,18:25,18:27,18:29,18:30,18:32,18:33,18:35,18:37',
'Kornwestheim':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:20,18:21,18:23,18:24,18:26,18:28,18:29,18:31,18:32,18:34,18:36',
'Leinfelden-Echterdingen':'17:48,17:50,17:51,17:53,17:55,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:36',
'Leonberg':'17:48,17:50,17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Leutenbach':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:37',
'Ludwigsburg':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:20,18:21,18:23,18:24,18:26,18:28,18:29,18:31,18:32,18:34,18:36',
'Marbach am Neckar':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Markgr√∂ningen':'17:48,17:50,17:51,17:53,17:55,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'M√∂glingen':'17:48,17:50,17:51,17:53,17:55,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Murrhardt':'17:50,17:52,17:53,17:55,17:57,17:58,18:00,18:01,18:03,18:04,18:06,18:08,18:09,18:11,18:12,18:14,18:16,18:17,18:19,18:20,18:22,18:24,18:25,18:27,18:29,18:30,18:32,18:33,18:35,18:37',
'Neuhausen auf den Fildern':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'N√ºrtingen':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Ostfildern':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:03,18:05,18:07,18:08,18:10,18:12,18:13,18:15,18:16,18:18,18:20,18:21,18:23,18:24,18:26,18:28,18:29,18:31,18:32,18:34,18:36',
'Plochingen':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:29,18:30,18:32,18:33,18:35,18:37',
'Remshalden':'17:50,17:52,17:53,17:55,17:56,17:58,18:00,18:01,18:03,18:04,18:06,18:08,18:09,18:11,18:12,18:14,18:16,18:17,18:19,18:21,18:22,18:24,18:25,18:27,18:29,18:30,18:32,18:33,18:35,18:37',
'Renningen':'17:47,17:49,17:50,17:52,17:54,17:55,17:57,17:58,18:00,18:01,18:03,18:05,18:06,18:08,18:10,18:11,18:13,18:14,18:16,18:18,18:19,18:21,18:22,18:24,18:27,18:28,18:30,18:31,18:33,18:35',
'Rudersberg':'17:50,17:52,17:53,17:55,17:56,17:58,18:00,18:01,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:19,18:21,18:23,18:25,18:26,18:28,18:29,18:31,18:33,18:34,18:36,18:37',
'Rutesheim':'17:48,17:50,17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Sch√∂naich':'17:48,17:50,17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Schorndorf':'17:50,17:52,17:53,17:55,17:56,17:58,18:00,18:01,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:19,18:21,18:23,18:25,18:26,18:28,18:29,18:31,18:33,18:34,18:36,18:37',
'Schwaikheim':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Sindelfingen':'17:48,17:50,17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Steinheim an der Murr':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Stuttgart':'17:49,17:51,17:52,17:54,17:55,17:57,17:59,18:00,18:02,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:19,18:21,18:23,18:24,18:26,18:28,18:29,18:31,18:32,18:34,18:36',
'S√º√üen':'17:51,17:53,17:54,17:56,17:57,17:59,18:01,18:02,18:04,18:06,18:08,18:09,18:11,18:12,18:14,18:16,18:17,18:19,18:20,18:22,18:24,18:26,18:27,18:29,18:30,18:32,18:34,18:35,18:37,18:38',
'Tamm':'17:48,17:50,17:51,17:53,17:55,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:11,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:36',
'Vaihingen an der Enz':'17:48,17:50,17:51,17:53,17:54,17:56,17:58,17:59,18:01,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:19,18:20,18:22,18:23,18:25,18:27,18:28,18:30,18:31,18:33,18:35',
'Waiblingen':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Weil der Stadt':'17:47,17:49,17:50,17:52,17:54,17:55,17:57,17:58,18:00,18:01,18:03,18:05,18:06,18:08,18:10,18:11,18:13,18:14,18:16,18:18,18:19,18:21,18:22,18:24,18:26,18:27,18:29,18:30,18:32,18:35',
'Weinstadt':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:37',
'Welzheim':'17:50,17:52,17:53,17:55,17:57,17:58,18:00,18:01,18:03,18:05,18:07,18:08,18:10,18:11,18:13,18:15,18:16,18:18,18:19,18:21,18:23,18:25,18:26,18:28,18:29,18:31,18:33,18:34,18:36,18:38',
'Wendlingen am Neckar':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:28,18:30,18:32,18:33,18:35,18:36',
'Wernau (Neckar)':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:29,18:30,18:32,18:33,18:35,18:37',
'Winnenden':'17:49,17:51,17:52,17:54,17:56,17:57,17:59,18:00,18:02,18:04,18:06,18:07,18:09,18:10,18:12,18:14,18:15,18:17,18:18,18:20,18:22,18:24,18:25,18:27,18:29,18:30,18:32,18:33,18:35,18:37'
};

/* ‚ïê‚ïê‚ïê RAMADAN 2026: 18. Feb (Tag 1) ‚Äì 19. M√§rz (Tag 30) ‚ïê‚ïê‚ïê */
const R_START=new Date(2026,1,18);
const R_DAYS=30;

/* Helpers */
const $=id=>document.getElementById(id);
function pad(n){return String(n).padStart(2,'0')}
function hm(s){if(!s)return null;const p=s.split(':');const h=parseInt(p[0]),m=parseInt(p[1]);return isNaN(h)||isNaN(m)?null:{h,m}}

/* Ramadan-Tag Index (0-29), oder -1 wenn au√üerhalb */
function dayIdx(){
    const now=new Date();
    const today=new Date(now.getFullYear(),now.getMonth(),now.getDate());
    const d=Math.floor((today-R_START)/86400000);
    return(d>=0&&d<R_DAYS)?d:-1;
}

/* Gesch√§tzter ƒ∞msak f√ºr Fortschrittsbalken (Region Stuttgart) */
/* Feb 18: ~05:49, Mar 19: ~04:33 ‚Äì lineare Interpolation */
function estImsak(di){
    const s=349,e=273;
    const m=Math.round(s+(e-s)*di/29);
    return pad(Math.floor(m/60))+':'+pad(m%60);
}

/* Datum-Anzeige */
$('dateStr').textContent=new Date().toLocaleDateString('de-DE',{weekday:'long',day:'numeric',month:'long',year:'numeric'});

/* Dropdown bef√ºllen (alphabetisch sortiert) */
const sel=$('city');
Object.keys(D).sort((a,b)=>a.localeCompare(b,'de')).forEach(c=>{
    const o=document.createElement('option');
    o.value=c;o.textContent=c;sel.appendChild(o);
});
/* Gespeicherte Stadt oder Standard */
const saved=localStorage.getItem('iftarCity');
if(saved&&D[saved])sel.value=saved;
else sel.value='Stuttgart';

/* ‚ïê‚ïê‚ïê ANZEIGE ‚ïê‚ïê‚ïê */
let tk=null;

function show(){
    const city=sel.value;
    if(!city||!D[city])return;
    localStorage.setItem('iftarCity',city);

    const di=dayIdx();

    /* Au√üerhalb Ramadan */
    if(di<0){
        const now=new Date();
        const today=new Date(now.getFullYear(),now.getMonth(),now.getDate());
        const diff=Math.floor((R_START-today)/86400000);
        $('meta').innerHTML=`üìç ${city}`;
        if(diff>0){
            $('cdT').textContent=`Noch ${diff} Tage bis Ramadan`;
            $('cdT').className='cd-time end';
        }else{
            $('cdT').textContent='Ramadan 2026 ist beendet';
            $('cdT').className='cd-time end';
        }
        $('cdTgt').innerHTML='18. Februar ‚Äì 19. M√§rz 2026';
        $('dot')?.classList.add('off');
        $('vM').textContent='--:--';
        $('vDay').textContent='--';
        $('prog').style.display='none';
        $('ft').textContent='Ramadan Mubarak üåô';
        if(tk){clearInterval(tk);tk=null}
        return;
    }

    const iftar=D[city].split(',')[di];
    $('vM').textContent=iftar;
    $('vDay').textContent=`Tag ${di+1} / ${R_DAYS}`;
    $('meta').innerHTML=`üìç ${city} ¬∑ Ramadan Tag ${di+1} <span class="badge badge-ok">Diyanet</span>`;
    $('cdTgt').innerHTML=`Ak≈üam (ƒ∞ftar): ${iftar}<span class="dot" id="dot"></span>`;
    $('prog').style.display='block';
    $('ft').innerHTML='Quelle: <b>Diyanet ƒ∞≈üleri Ba≈ükanlƒ±ƒüƒ±</b> ¬∑ Feste Zeiten Ramadan 2026';

    /* Countdown starten */
    if(tk)clearInterval(tk);
    const mg=hm(iftar);
    if(!mg)return;
    const imsak=hm(estImsak(di));

    const tick=()=>{
        const now=new Date();
        const tgt=new Date();tgt.setHours(mg.h,mg.m,0,0);
        const el=$('cdT'),dot=$('dot');

        if(now>=tgt){
            el.textContent='üåô ƒ∞ftar Vakti! Hayƒ±rlƒ± ƒ∞ftarlar!';
            el.className='cd-time end';
            if(dot)dot.classList.add('off');
            pct(100);
            return;
        }
        el.className='cd-time on';
        if(dot)dot.classList.remove('off');
        const d=tgt-now;
        el.textContent=`${pad(Math.floor(d/36e5))}:${pad(Math.floor(d%36e5/6e4))}:${pad(Math.floor(d%6e4/1e3))}`;

        if(imsak){
            const fd=new Date();fd.setHours(imsak.h,imsak.m,0,0);
            pct(Math.max(0,Math.min(100,(now-fd)/(tgt-fd)*100)));
        }
    };
    tick();tk=setInterval(tick,1000);
}

function pct(v){$('pFill').style.width=v.toFixed(1)+'%';$('pPct').textContent=Math.round(v)+' %'}

/* Events */
sel.addEventListener('change',show);

/* Auto-Start */
show();
</script>
</body>
</html>